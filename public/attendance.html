<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, viewport-fit=cover"
  />
  <title>Attendance Overview</title>
  <style>
    /* Global Reset & Body */
    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }
    html {
        font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        font-size: 16px;
        line-height: 1.5;
        color: #333;
    }
    body {
        background: #f0f2f5;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
    }

    /* --- Polished Header --- */
    header {
        background: rgb(243,79,76);
        padding: 0.75rem 1rem;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        display: flex;
        align-items: center;
        justify-content: space-between;
    }
    .header-left, .header-right {
        flex: 1 0 0; /* Distribute space evenly */
    }
    .header-center {
        flex: 2 1 auto; /* Allow title to take more space but also shrink */
        text-align: center;
    }
    .header-right {
        display: flex;
        justify-content: flex-end;
    }
    header h1 {
        color: #fff;
        font-size: 1.25rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        white-space: nowrap; /* Prevent title from wrapping */
    }
    .header-btn {
        padding: 8px 14px;
        background: white;
        color: rgb(243, 79, 76);
        font-weight: bold;
        border-radius: 4px;
        text-decoration: none;
        cursor: pointer;
        transition: background 0.3s;
        white-space: nowrap;
        flex-shrink: 0;
    }
    .header-btn:hover { background: #f1f1f1; }

    /* Main Content Styles */
    main { flex: 1; overflow-y: auto; padding: 16px; max-width: 800px; margin: 0 auto; width: 100%; }
    .card { background: #fff; padding: 20px; border-radius: 8px; margin-bottom: 24px; box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1); }
    .filter-form form { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 16px; align-items: end; }
    .filter-form label { font-weight: bold; font-size: 14px; margin-bottom: 6px; display: block; }
    .filter-form select, .filter-form input, .filter-form button { padding: 10px; font-size: 16px; border: 1px solid #ccc; border-radius: 4px; }
    .filter-form button { background: rgb(243, 79, 76); color: #fff; cursor: pointer; border: none; }
    .session-list h2 { margin-bottom: 12px; color: rgb(243, 79, 76); text-align: center; }
    
    /* Card Layout for Logs */
    .log-cards { display: grid; gap: 1rem; }
    .log-card {
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.08);
        padding: 1rem;
        border-left: 5px solid;
    }
    .log-card[data-status="present"] { border-left-color: #28a745; }
    .log-card[data-status="late"] { border-left-color: #ffc107; }
    .log-card[data-status="absent"] { border-left-color: #dc3545; }
    .log-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
    .log-header .date { font-size: 1.1rem; font-weight: bold; color: #333; }
    .log-header .shift { font-size: 0.9rem; color: #666; background: #f0f0f0; padding: 3px 8px; border-radius: 12px; }
    .log-body { display: grid; gap: 0.5rem; font-size: 0.95rem; }
    .log-detail { display: flex; justify-content: space-between; }
    .log-detail .label { color: #666; }
    .log-detail .value { font-weight: 500; }
    .status-tags { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-top: 0.5rem; }
    .status-badge { padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: bold; color: white; text-transform: capitalize; }
    .status-present { background-color: #28a745; }
    .status-late { background-color: #ffc107; }
    .status-absent { background-color: #dc3545; }
    .status-on-time-exit { background-color: #17a2b8; }
    .status-no-exit { background-color: #6c757d; }
    
    .no-logs { text-align: center; padding: 2rem; }
    .back-link { text-align: center; margin-top: 16px; }
    .back-link a { display: inline-block; padding: 10px 20px; background: #fff; border: 1px solid #ccc; border-radius: 4px; color: #333; text-decoration: none; font-size: 16px; }
    footer { background: #333; padding: 12px; text-align: center; font-size: 12px; color: #777; }
    
    @media (max-width: 480px) {
        header h1 { font-size: 1rem; }
        .header-btn { padding: 6px 10px; font-size: 14px; }
    }
  </style>
</head>
<body>
  
<header>
    <a href="/home" class="header-btn">Home</a>
    <h1>SOHOJIA FOUNDATION</h1>
    <a href="/logout" class="header-btn">Logout</a>
</header>
    
  <main>
    <div class="card filter-form">
      <form method="GET" action="/volunteer-attendance/{{ volunteerId }}/attendance">
        <div>
            <label for="start_date">From Date</label>
            <input type="date" name="start_date" id="start_date" value="{{ filters.start_date }}">
        </div>
        <div>
            <label for="end_date">To Date</label>
            <input type="date" name="end_date" id="end_date" value="{{ filters.end_date }}">
        </div>
        <div>
            <label for="status">Status</label>
            <select name="status" id="status">
                <option value="all" {% if filters.status == 'all' %}selected{% endif %}>All</option>
                <option value="present" {% if filters.status == 'present' %}selected{% endif %}>Present</option>
                <option value="late" {% if filters.status == 'late' %}selected{% endif %}>Late</option>
                <option value="absent" {% if filters.status == 'absent' %}selected{% endif %}>Absent</option>
            </select>
        </div>
        <div>
            <label>&nbsp;</label>
            <button type="submit">Apply Filter</button>
        </div>
      </form>
    </div>

    <div class="session-list">
      <h2>Attendance Logs</h2>
      <div class="log-cards">
        {% for log in logs %}
          <div class="log-card" data-status="{{ log.status }}">
            <div class="log-header">
              <span class="date">{{ log.session_date }}</span>
              <span class="shift">{{ log.shift }}</span>
            </div>
            <div class="log-body">
              <div class="log-detail">
                <span class="label">Time (In - Out):</span>
                <span class="value">{{ log.displayTime }}</span>
              </div>
              <div class="log-detail">
                <span class="label">Duration:</span>
                <span class="value">{{ log.duration }}</span>
              </div>
              <div class="log-detail">
                <span class="label">Status:</span>
                <div class="status-tags">
                    <span class="status-badge status-{{ log.status }}">{{ log.status | capitalize }}</span>
                    {% if log.exit_status %}
                        <span class="status-badge status-{{ log.exit_status | lower | replace(' ', '-') }}">{{ log.exit_status }}</span>
                    {% endif %}
                </div>
              </div>
            </div>
          </div>
        {% else %}
          <div class="card no-logs">
            <p>No attendance logs found for the selected criteria.</p>
          </div>
        {% endfor %}
      </div>
    </div>


  </main>
  <footer>&copy; {{ currentYear }} Attendance System</footer>
</body>
</html>